### **WD141 DMA(Direct Memory Access) 보호 설정**

**WD142 (WD142EnableKernelDMAProtection)** 항목은 **"Thunderbolt 등 외부 포트를 통한 DMA 공격 방어 설정"**을 의미합니다.

한마디로 요약하면 **"해커가 Thunderbolt나 USB4 포트에 특수 장치를 꽂아 CPU를 거치지 않고 메모리 데이터를 직접 훔쳐가는 'DMA 공격'을 막기 위해 커널 레벨의 보호막을 켜라"**는 뜻입니다.

---

### 1. 핵심 의미: "메모리 직접 접근 권한 통제"

DMA(Direct Memory Access)는 장치가 CPU의 개입 없이 시스템 메모리에 직접 데이터를 읽고 쓰는 기술입니다. 이는 성능을 높여주지만, 물리적인 보안 허점이 될 수 있습니다.

* **취약한 상태 (DMA 보호 미설정):**
* 노트북이 잠겨 있거나 로그아웃된 상태라도, Thunderbolt 포트에 악성 장치를 연결하면 메모리에 저장된 암호화 키, 로그인 세션 정보, 기밀 데이터를 실시간으로 복제할 수 있습니다.
* 이는 별도의 소프트웨어 해킹 없이 물리적 접속만으로 시스템 권한을 탈취하는 강력한 공격 수단입니다.


* **안전한 상태 (Kernel DMA Protection 활성화):**
* OS가 부팅될 때부터 외부 장치의 메모리 접근을 감시합니다.
* 신뢰할 수 없는 장치가 연결되면 메모리 격리(IOMMU) 기술을 통해 지정된 구역 외에는 접근하지 못하도록 원천 차단합니다.



---

### 2. 점검 목적 (Why?)

"포트에 장치를 꽂는 것만으로 해킹이 가능한가요?"

네, Thunderbolt와 같은 고성능 인터페이스는 하드웨어 설계상 메모리 버스에 직접 연결되기 때문에 전통적인 OS 보안 체계를 우회하기 때문입니다.

1. **물리적 도난 및 분실 대비:**
* 노트북을 분실했을 때, 습득자가 하드웨어를 분해하지 않고 외부 포트 연결만으로 내부 데이터를 추출하는 것을 방지합니다.


2. **공급망 공격 및 악성 주변기기 방어:**
* 정상적인 도킹 스테이션이나 어댑터로 위장하여 데이터를 가로채는 '주변기기 기반 공격'을 차단합니다.


3. **최신 하드웨어 보안 표준 준수:**
* Windows 10/11의 핵심 보안 기능인 '가상화 기반 보안(VBS)'과 연동하여 시스템 무결성을 유지합니다.



---

### 3. 점검 기준 (Pass/Fail)

보안 가이드라인 및 최신 하드웨어 보안 권고안에 따른 판단 기준입니다.

* **양호 (Safe):**
* 시스템 정보에서 **"커널 DMA 보호"** 항목이 **"켬(On)"**으로 표시되어 있는 경우


* **취약 (Vulnerable):**
* 하드웨어가 기능을 지원함에도 불구하고 **"끔(Off)"**으로 되어 있거나, BIOS/정책 설정으로 비활성화된 경우



---

### 4. 설정 확인 및 조치 방법

이 설정은 하드웨어(BIOS), 운영체제(Windows), 그룹 정책의 삼박자가 맞아야 활성화됩니다.

**Step 1: 시스템 상태 확인**

1. **실행:** `Win + S` > **"시스템 정보"** (msinfo32) 검색 및 실행
2. **항목 확인:** 하단부의 **"커널 DMA 보호"** 항목이 **"켬"**인지 확인합니다.

**Step 2: 조치 방법 (비활성화 시)**

1. **BIOS 설정:** PC 재부팅 시 BIOS/UEFI 설정에 진입하여 `Kernel DMA Protection` 또는 `Virtualization Technology for Directed I/O (VT-d)` 항목을 **Enabled**로 변경합니다.
2. **그룹 정책(GPO) 설정:**
* `컴퓨터 구성` > `관리 템플릿` > `시스템` > `커널 DMA 보호`
* **"커널 DMA 보호와 호환되지 않는 외부 장치에 대한 열거 정책"**을 **[사용(Enabled)]**으로 설정하고, **"모두 차단"**을 선택합니다.



---

### 💡 참고: 구형 기기에서의 한계

Kernel DMA Protection은 하드웨어 지원이 필수입니다(대략 인텔 8세대 이상). 만약 하드웨어가 이를 지원하지 않는다면, 차선책으로 **"장치가 잠겨 있을 때 새로운 Thunderbolt 장치 연결을 차단"**하는 대체 정책을 반드시 적용해야 합니다.

### 요약

> **WD142 항목은 "외부 포트는 데이터를 주고받는 통로이지 메모리 창고의 열쇠가 아니므로, OS가 입구를 엄격히 감시하게 하라"는 의미입니다.**

---