KISA(한국인터넷진흥원)의 주요정보통신기반시설 기술적 취약점 분석·평가 가이드에 있는 **W-29 (W29ConfigureDNSZoneTransfer)** 항목은 **"DNS 영역 전송(Zone Transfer) 설정"**을 의미합니다.

한마디로 요약하면 **"우리 회사의 모든 서버 목록(IP 주소와 도메인 이름 전체)이 담긴 '전화번호부'를 아무나 통째로 다운로드해 가지 못하게 막아라"**는 뜻입니다.

상세한 의미와 보안 위험성, 조치 방법은 다음과 같습니다.

---

### 1. 핵심 의미: "전체 지도 넘겨주기"

DNS 서버는 원래 사용자가 "[의심스러운 링크 삭제됨]의 IP가 뭐야?"라고 물으면(Query), 그에 해당하는 IP 하나만 알려주는 역할을 합니다.

하지만 **DNS 영역 전송(Zone Transfer)** 기능은 **주(Primary) DNS 서버**가 **보조(Secondary) DNS 서버**에게 **데이터베이스 전체를 복제**해 주기 위해 사용되는 기능입니다.

* **취약한 상태 (모든 서버 허용):** 해커가 `nslookup`이나 `dig` 같은 도구로 "너네 회사 도메인 정보 몽땅 다 내놔(AXFR 요청)"라고 명령하면, 서버가 거절하지 않고 내부의 모든 서버 목록을 줄줄이 읊어줍니다.
* **안전한 상태 (특정 서버만 허용):** "너는 우리 회사 보조 DNS 서버가 아니잖아? 못 줘!"라고 거절합니다.

### 2. 점검 목적 (Why?)

"IP 주소 좀 알려주는 게 뭐가 위험한가요?"

하나하나 알려주는 건 괜찮지만, **전체 목록**을 주는 것은 **보안 정찰(Reconnaissance)** 단계에서 치명적입니다.

1. **서버 목록 및 구조 노출:**
* 해커는 영역 전송을 통해 외부엔 공개되지 않아야 할 `dev.company.com` (개발 서버), `admin.company.com` (관리자 페이지), `test-db.company.com` 같은 **숨겨진 서버들의 존재와 IP**를 한눈에 파악할 수 있습니다.


2. **공격 대상 식별:**
* 네트워크 토폴로지(구조)를 파악하고, 보안이 취약해 보이는 테스트 서버나 구버전 서버를 골라서 집중적으로 공격할 수 있습니다.



### 3. 점검 기준 (Pass/Fail)

KISA 가이드라인에 따른 판단 기준은 다음과 같습니다.
*(단, 이 항목은 DNS 서비스를 운영 중인 서버에만 해당합니다.)*

* **양호 (Safe):**
* 영역 전송이 **"허용되지 않음"**으로 설정되어 있거나,
* 영역 전송을 허용하더라도 **"지정된 IP 주소(보조 DNS 서버)"**로만 전송되도록 제한된 경우


* **취약 (Vulnerable):**
* 영역 전송이 **"모든 서버"**에 대해 허용된 경우



### 4. 설정 확인 및 조치 방법 (Windows DNS)

이 설정은 **DNS 관리자(DNS Manager)** 콘솔에서 제어합니다.

1. **DNS 관리자 실행:** `dnsmgmt.msc` 입력
2. **영역 선택:** '정방향 조회 영역(Forward Lookup Zones)'에서 설정할 도메인을 우클릭 > **[속성(Properties)]** 선택
3. **영역 전송 탭 이동:** 상단의 **[영역 전송(Zone Transfers)]** 탭 클릭
4. **조치 (선택):**
* **방법 A (보조 DNS가 없는 경우):** **"영역 전송 허용(Allow zone transfers)"** 체크 박스를 **해제**합니다. (가장 안전)
* **방법 B (보조 DNS가 있는 경우):** 체크 박스를 켜되, 반드시 **"다음 서버로만(Only to the following servers)"**을 선택하고, 아래 목록에 **보조 DNS 서버의 IP 주소**를 등록합니다.
* *(주의: "모든 서버(To any server)"에 체크되어 있으면 취약점입니다.)*



### 💡 참고: TCP 53번 포트

DNS는 평소에는 **UDP 53번** 포트를 쓰지만, 이 '영역 전송'을 할 때만 데이터가 크기 때문에 **TCP 53번** 포트를 사용합니다. 방화벽 설정 시 참고하시면 좋습니다.

### 요약

> **W-29 항목은 "우리 회사 서버들의 '전체 명단'을 해커에게 넘겨주지 마라"는 뜻입니다.**

이 설정을 통해 해커가 우리 내부망 구조를 쉽게 파악하지 못하게 막는 것이 핵심입니다.
