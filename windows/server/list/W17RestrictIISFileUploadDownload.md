KISA(한국인터넷진흥원)의 주요정보통신기반시설 기술적 취약점 분석·평가 가이드에 있는 **W-17 (W17RestrictIISFileUploadDownload)** 항목은 **"IIS 파일 업로드 및 다운로드 제한"**을 의미합니다.

*(참고: 가이드 버전에 따라 W-15 또는 W-19로 표기되기도 하지만, 내용은 동일합니다.)*

한마디로 요약하면 **"게시판에 영화 한 편 크기(GB)의 파일을 올리지 못하게 막고(업로드 제한), 서버의 설정 파일 같은 중요 파일은 다운로드 못 하게 막아라(다운로드 제한)"**는 뜻입니다.

상세한 의미와 보안 목적은 다음과 같습니다.

---

### 1. 핵심 의미: 크기(Size)와 종류(Type)의 통제

이 항목은 웹 서버가 처리하는 파일의 **'용량'**과 **'확장자'**를 제어하는 설정입니다.

1. **업로드 제한 (용량):**
* 사용자가 웹 사이트에 파일을 올릴 때, 허용할 **최대 크기(Max Allowed Content Length)**를 지정합니다.
* **취약:** 제한이 없거나 2GB, 4GB처럼 너무 크면, 해커가 무의미한 대용량 파일을 반복적으로 업로드하여 서버의 디스크를 꽉 채우거나 네트워크를 마비시킬 수 있습니다.


2. **다운로드 제한 (확장자):**
* 사용자가 웹 브라우저를 통해 요청할 수 없는 **파일 확장자**를 지정합니다.
* **취약:** `.config`, `.mdb`, `.log`, `.bak` 같은 파일이 다운로드되면 서버의 비밀번호나 소스코드가 유출될 수 있습니다.



### 2. 점검 목적 (Why?)

* **서비스 거부 공격(DoS) 방지:** 해커가 엄청나게 큰 파일을 업로드하여 서버의 메모리나 디스크 공간을 고갈시키는 공격(Resource Exhaustion)을 막습니다.
* **정보 유출 방지:** 웹 소스코드나 설정 파일 등 민감한 파일이 외부로 다운로드되는 것을 차단합니다.

### 3. 점검 기준 (Pass/Fail)

KISA 가이드라인에 따른 판단 기준은 다음과 같습니다.

* **양호 (Safe):**
* 파일 업로드 용량이 서비스 목적에 맞게 적절히 제한된 경우 (예: 30MB 이하 등)
* 불필요하거나 위험한 확장자(config, bat, exe 등)의 업/다운로드가 차단된 경우


* **취약 (Vulnerable):**
* 업로드 용량 제한이 없거나, 지나치게 크게 설정된 경우
* 서버 내 중요 파일 확장자에 대한 다운로드 필터링이 없는 경우



### 4. 설정 확인 및 조치 방법 (IIS 관리자)

이 설정은 IIS의 **"요청 필터링(Request Filtering)"** 기능에서 제어합니다.

#### A. 업로드 용량 제한 설정

1. **IIS 관리자 실행:** `inetmgr` 실행
2. **사이트 선택:** 설정할 웹 사이트 클릭
3. **요청 필터링(Request Filtering) 더블 클릭**
4. **기능 설정 편집(Edit Feature Settings):** 우측 작업 패널에서 클릭
5. **최대 허용 콘텐츠 길이(Max allowed content length):**
* 이 값은 **바이트(Bytes)** 단위입니다.
* 기본값은 약 30,000,000 (30MB)입니다.
* 서비스 특성에 맞게 불필요하게 크다면 줄여야 합니다. (예: 10MB = 10485760)



#### B. 파일 확장자 다운로드 차단

1. **요청 필터링(Request Filtering)** 화면에서 **[파일 이름 확장명(File Name Extensions)]** 탭 클릭
2. **확장명 거부(Deny File Name Extension):** 우측 작업 패널 클릭
3. **입력:** `.config`, `.inc`, `.bak`, `.log` 등 다운로드를 막고 싶은 확장자를 입력하고 확인.
* *(IIS는 기본적으로 `.config` 등 중요 파일은 이미 차단되어 있으나, 개발자가 만든 백업 파일(`.bak`) 등은 수동으로 추가해야 합니다.)*



### 요약

> **W-17 항목은 "너무 큰 짐(파일)은 받지 말고, 보여주면 안 되는 비밀 문서(설정 파일)는 내주지 마라"는 뜻입니다.**

서버 자원을 보호(DoS 방지)하고 기밀 정보를 지키기 위한 필수적인 필터링 설정입니다.

혹시 **W-18 (웹 서비스 확장 기능 제한)** 항목이나 다른 웹 보안 설정에 대해서도 궁금한 점이 있으신가요?